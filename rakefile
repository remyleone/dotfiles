# Rakefile de construction de mes fichiers de configurations

task :default => [:vim_install, :ssh, :music, :avatar, 
    :bash_install, :zsh_install, :screen, :git,
    :bin, :tmux, :gemrc ]

task :vim_install do
    sh 'cp vim/vimrc ~/.vimrc'
    sh 'cp -r vim ~/.vim'
end

task :vim_clean do
    sh 'rm -fr ~/.vim/ ~/.vimrc'
end

task :ssh do
    sh 'mkdir -p ~/.ssh/'
    sh 'cp -r ssh/* ~/.ssh'
end

task :ssh_clean do
    sh 'rm -fr ~/.ssh/'
end

task :music do
    sh 'mkdir -p ~/.mpd'
    sh 'cp music/mpdconf ~/.mpd/mdfconf'
end

task :music_clean do
    sh 'rm -fr ~/.mpd/'
end

task :avatar do
    sh 'cp avatar/face.jpg ~/.face'
end

task :avatar_clean do
    sh 'rm ~/.face'
end

task :shell_build do
    sh 'rm -f shell/shell.sh'
    sh 'cat shell/export.sh >> shell/shell.sh'
    sh 'cat shell/alias.sh >> shell/shell.sh'
    sh 'cat shell/path.sh >> shell/shell.sh'
end

task :irc do
    sh 'cp -r irc/irssi/ ~/.irssi'
end

task :irc_clean do
    sh 'rm -fr ~/.irssi'
end

task :bash_build => :shell_build do
    sh 'rm -f shell/bash/bashrc'
    sh 'cat shell/shell.sh >> shell/bash/bashrc'
    sh 'cat shell/bash/bashrc.bash >> shell/bash/bashrc'
end

task :bash_install => :bash_build do
    sh 'cp shell/bash/bashrc ~/.bashrc'
end

task :bash_clean do
    sh 'rm ~/.bashrc'
end

task :zsh_build => :shell_build do
    sh 'rm -f shell/zsh/zshrc'
    sh 'cat shell/shell.sh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/zshrc.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/appearance.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/prompt.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/history.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/git.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/completion.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/key-bindings.zsh >> shell/zsh/zshrc'
    sh 'cat shell/zsh/misc.zsh >> shell/zsh/zshrc'
end

task :zsh_install => :zsh_build do
    sh 'cp shell/zsh/zshrc ~/.zshrc'
end

task :zsh_clean do
    sh 'rm -fr ~/.zsh .zshrc'
end

task :git do
    sh 'cp git/gitconfig ~/.gitconfig'
    sh 'cp git/gitmodules ~/.gitmodules'
end

task :git_clean do
    sh 'rm ~/.gitconfig ~/.gitmodules'
end

task :screen do
    sh 'cp screenrc ~/.screenrc'
end

task :screen_clean do
    sh 'rm ~/.screenrc'
end

task :Xdefaults do
    sh 'cp Xdefaults ~/.Xdefaults'
end

task :Xdefaults_clean do
    sh 'rm ~/.Xdefaults'
end

task :tmux do
    sh 'cp tmux.conf ~/.tmux.conf'
end

task :tmux_clean do
    sh 'rm ~/.tmux.conf'
end

task :bin do
    sh 'cp -r bin ~/.bin'
end

task :gemrc do
    sh 'cp gemrc ~/.gemrc'
end

task :backup => [ :dpkg, :gem ]

task :dpkg do
    sh 'dpkg -l > packages/dpkg.txt'
end

task :gem do
    sh 'gem list > packages/gem.txt'
end
